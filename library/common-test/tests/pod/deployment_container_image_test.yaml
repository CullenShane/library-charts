
suite: deployment container image test
templates:
  - common.yaml
tests:
  - it: should pass with default values
    asserts:
      - documentIndex: &deploymentDoc 0
        isKind:
          of: Deployment

  - it: should pass with imagePullPolicy changed
    set:
      image:
        pullPolicy: Always
    asserts:
      - equal:
          documentIndex: *deploymentDoc
          path: spec.template.spec.containers[0].imagePullPolicy
          value: Always

#TODO:
  # - it: should pass with image changed
  #   set:
  #     image:
  #       repository: some_repo
  #       tag: tag
  #   asserts:
  #     - equal:
  #         documentIndex: *deploymentDoc
  #         path: spec.template.spec.containers[0].image
  #         value:
  #           repository: some_repo
  #           tag: some_tag
