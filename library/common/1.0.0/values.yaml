# This file only includes the default values that are applied.
# All values can be overridden per chart, in their values.yaml
# For Examples and Explanation view the "Values.yaml Explained" markdown file

image:
  repository: repo
  tag: tag
  pullPolicy: IfNotPresent

imageSelector: ""

command: []

args: []

extraArgs: []

env: {}

envList: []

envFrom: []

TZ: UTC

lifecycle: {}

nvidiaCaps:
  - all

injectFixedEnvs: true

security:
  PUID: 568
  UMASK: 002

rbac:
  main:
    enabled: false
    primary: true
    clusterWide: false

serviceAccount:
  main:
    enabled: false
    primary: true

resources:
  limits:
    cpu: 4000m
    memory: 8Gi
  requests:
    cpu: 10m
    memory: 50Mi

addAnnotations:
  traefik: true
  metallb: true

hostAliases: []

hostNetwork: false

hostname: ""

tty: false

stdin: false

probes:
  liveness:
    enabled: true
    type: AUTO
    path: "/"
    port: ""
    command: []
    httpHeaders: {}
    spec:
      initialDelaySeconds: 10
      periodSeconds: 10
      timeoutSeconds: 5
      failureThreshold: 5
  readiness:
    enabled: true
    type: AUTO
    path: "/"
    port: ""
    command: []
    spec:
      initialDelaySeconds: 10
      periodSeconds: 10
      timeoutSeconds: 5
      failureThreshold: 5
  startup:
    enabled: true
    type: AUTO
    path: "/"
    port: ""
    command: []
    spec:
      initialDelaySeconds: 10
      timeoutSeconds: 2
      periodSeconds: 5
      failureThreshold: 60

externalInterfaces: []

# Injected from middleware
ixExternalInterfacesConfiguration: []
# Injected from middleware
ixExternalInterfacesConfigurationNames: []

# Everything bellow needs documentation

global:
  defaults:
    # If no probe Type is defined, assume this
    defaultProbeType: TCP
    # If no port Protocol is defined, assume this
    defaultPortProtocol: TCP
    # If no service Type is defined, assume this
    defaultServiceType: ClusterIP
    # If no PVC Size is defined, assume this
    defaultPVCSize: 1Gi
    # If no PVC type is defined, assume this
    defaultPersistenceType: pvc
    # If no PVC accessMode is defined, assume this
    defaultAccessMode: ReadWriteOnce
    # If no PVC retain key is defined, assume this
    # Note, that this adds an annotation for helm whether to delete
    # the resource on uninstall, manually deleting the namespace it will delete
    # the resource no matter what this is set.
    defaultPVCRetain: false
    # Define a storageClassName that will be used for all PVCs by default
    # Leave empty to rely on the node's default storageClass
    storageClassName:
  nameOverride: ""
  fullnameOverride: ""
  annotations: {}
  labels: {}

nameOverride: ""

fullnameOverride: ""

podAnnotations: {}

podLabels: {}

enableServiceLinks: false

schedulerName: ""

priorityClassName: ""

dnsPolicy: ""

dnsConfig: {}

nodeSelector: {}

tolerations: []

podSecurityContext:
  runAsUser: 568
  runAsGroup: 568
  fsGroup: 568
  supplementalGroups: []
  fsGroupChangePolicy: OnRootMismatch

securityContext:
  privileged: false
  readOnlyRootFilesystem: true
  allowPrivilegeEscalation: false
  runAsNonRoot: true
  capabilities:
    drop: []
    add: []

termination:
  messagePath: ""
  messagePolicy: ""
  gracePeriodSeconds: 10

# TODO: docs -- Used to add SCALE GPU configuration
# TODO: Verify that this is the correct value returned from ref
scaleGPU: {}
  # gpu: 1

controller:
  # -- Enable the controller.
  enabled: true
  # -- Set the controller type.
  # Valid options are: deployment | daemonset | statefulset
  type: deployment
  # -- Set labels on the deployment/statefulset/daemonset. Helm templates can be used.
  labels: {}
  # -- Set  annotations on the deployment/statefulset/daemonset. Helm templates can be used.
  annotations: {}
  # -- Revision history limit
  revisionHistoryLimit: 3
  # -- Number of desired pods
  replicas: 1
  # -- Set the controller upgrade strategy
  # For Deployments, valid values are Recreate (default) and RollingUpdate.
  # For StatefulSets, valid values are OnDelete and RollingUpdate (default).
  # DaemonSets ignore this.
  strategy: ""
  # -- Set rollingUpdate strategies
  rollingUpdate:
    # -- Set deployment RollingUpdate max unavailable
    unavailable:
    # -- Set deployment RollingUpdate max surge
    surge:
    # -- Set statefulset RollingUpdate partition
    partition:

# -- Configure the services for the chart here.
# Additional services can be added by adding a dictionary key similar to the 'main' service.
# @default -- See below
service:
  main:
    # -- Enables or disables the service
    enabled: true
    # enabled: false
    # -- Configure the Service port information here.
    # Additional ports can be added by adding a dictionary key similar to the 'main' port.
    # @default -- See below
    primary: true
    ports:
      main:
        # -- Enables or disables the port
        enabled: true
        # enabled: false
        # -- Make this the primary port (used in probes, notes, etc...)
        # If there is more than 1 service, make sure that only 1 port is marked as primary.
        primary: true
        # -- The port number (Default port is required if enabled: true)
        port:
        # -- Port protocol.
        # Support values are `HTTP`, `HTTPS`, `TCP` and `UDP`.
        # HTTPS and HTTPS spawn a TCP service and get used for internal URL and name generation
        protocol: HTTP
        # -- Specify a service targetPort if you wish to differ the service port from the application port.
        # If `targetPort` is specified, this port number is used in the container definition instead of
        # the `port` value. Therefore named ports are not supported for this field.
        targetPort:
        # -- Specify the nodePort value NodePort service types.
        # [[ref]](https://kubernetes.io/docs/concepts/services-networking/service/#type-nodeport)
        nodePort:

persistence: {}
# TODO: Discuss if we are going to add defaults like:
  # - /dev/shm
  # - /tmp
  # - /var/log
  # - /shared

# -- Used in conjunction with `controller.type: statefulset` to create individual disks for each instance.
volumeClaimTemplates: {}
# data:
#   mountPath: /data
#   accessMode: "ReadWriteOnce"
#   size: 1Gi
